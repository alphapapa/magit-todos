#+BEGIN_HTML
<a href=https://alphapapa.github.io/dont-tread-on-emacs/><img src="dont-tread-on-emacs-150.png" align="right"></a>
#+END_HTML

* magit-todos

  [[https://melpa.org/#/magit-todos][file:https://melpa.org/packages/magit-todos-badge.svg]] [[https://stable.melpa.org/#/magit-todos][file:https://stable.melpa.org/packages/magit-todos-badge.svg]]

This package displays keyword entries from source code comments and Org files in the Magit status buffer.  Activating an item jumps to it in its file.  By default, it uses keywords from [[https://github.com/tarsius/hl-todo][hl-todo]], minus a few (like =NOTE=).

** Contents
:PROPERTIES:
:TOC:      siblings
:END:
    -  [[#screenshots][Screenshots]]
    -  [[#installation][Installation]]
    -  [[#usage][Usage]]
    -  [[#tips][Tips]]
    -  [[#changelog][Changelog]]
    -  [[#credits][Credits]]

** Screenshots

[[screenshots/matrix.png]]

Org headings can optionally be fontified as such, and sorting can be customized (this shows sorting by filename, then keyword, then buffer position):

[[screenshots/org.png]]

Items can also be automatically grouped in a customizable way, which can be helpful in large repos:

[[screenshots/emacs-grouped.png]]

This shows grouping items by the first path component, then keyword, then filename, and with optional keyword header fontification:

[[screenshots/emacs-grouped-by-path.png]]

** Installation
:PROPERTIES:
:TOC:      0
:END:

*** External scanner

One of the following external scanners is required:

+  [[https://github.com/BurntSushi/ripgrep][ripgrep]]
+  =git grep= (built with PCRE support)
+  GNU =grep= (built with PCRE support)

Most Linux systems should have the latter two by default, but some non-standard systems may not.  For example, on MacOS you may use [[https://brew.sh/][Homebrew]] to install =ripgrep=, or =git= with PCRE support, like: ~brew reinstall --with-pcre2 git~.

*** Emacs package

If you installed from MELPA, you're done!

**** Manually

Install these required packages:

-  =async=
-  =dash=
-  =f=
-  =hl-todo=
-  =magit=
-  =pcre2el=
-  =s=

Then put this file in your =load-path=, and put this in your init file:

#+BEGIN_SRC elisp
  (require 'magit-todos)
#+END_SRC

** Usage

Run =magit-todos-mode=, then open a Magit status buffer.

** Tips

+  Customize settings in the =magit-todos= group.
+  Jump to the to-do list in a Magit status buffer by pressing @@html:<kbd>@@j T@@html:</kbd>@@.  If the section is empty (e.g. when using manual updates), it will scan for items.
+  When configured for manual updates, manually update the to-do list by pressing @@html:<kbd>@@j T@@html:</kbd>@@ with point in the to-do list, or with the =magit-todos-update= command.
+  With point on a to-do item:
     -  Show the item by pressing @@html:<kbd>@@RET@@html:</kbd>@@
     -  Peek at the item by pressing @@html:<kbd>@@SPC@@html:</kbd>@@

** Changelog
:PROPERTIES:
:TOC:      0
:END:

*** 1.1-pre

*Additions*
+  Option ~magit-todos-exclude-globs~, a list of glob patterns to ignore when searching for to-do items.

*Changes*
+  Remove dependency on ~a~.
+  Remove dependency on =anaphora=.

*** 1.0.4

*Fixes*
+  Fix =find|grep= scanner ([[https://github.com/alphapapa/magit-todos/issues/46][issue 46]]).  Thanks to [[https://github.com/Ambrevar][Pierre Neidhardt]].

*** 1.0.3

*Fixes*
+  Define variables earlier to avoid compiler warnings.
+  Remove unused var ~magit-todos-ignore-file-suffixes~.

*** 1.0.2

*Fixes*
+  ~regexp-quote~ item keywords when jumping to an item.  (Fixes #36.  Thanks to [[https://github.com/dfeich][Derek Feichtinger]].)
+  Ensure =grep= supports =--perl-regexp=.
+  Warn when unable to find a suitable scanner (i.e. =rg=, or a PCRE-compatible version of =git= or =grep=).

*** 1.0.1

*Fixes*
+  Test whether =git grep= supports =--perl-regexp= by checking its =--help= output, rather than doing a search and checking for an error.
+  ~message~ instead of ~error~ for weird behavior.  (This message exists to help track down an inconsequential bug.)
+  Remove unused ~magit-todos-ignore-directories~ option.  (To be replaced in a future release.)

*** 1.0.0

Initial release.

** Credits

+  This package was inspired by [[https://github.com/danielma/magit-org-todos.el][magit-org-todos]].
+  The =ag= support was made much simpler by the great [[https://github.com/joddie/pcre2el][pcre2el]] package by Jon Oddie.
+  Thanks to [[https://github.com/zhaojiangbin][Jiangbin Zhao]] for his extensive testing and feedback.

** License
:PROPERTIES:
:TOC:      ignore
:END:

GPLv3

# Local Variables:
# before-save-hook: org-make-toc
# End:
